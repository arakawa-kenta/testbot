<html>
<head>
    <title>PeerJS - Video chat example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/build_race.css">

    <script src="js/build_race.js"></script>

    <script type="text/javascript" src="https://skyway.io/dist/0.3/peer.js" charset="UTF-8"></script>

</head>

<body>
<div id="race-window">
    <video id="remote-video" autoplay></video>
    <video id="local-video" muted="true" autoplay style="display: none"></video>
    <div id="car-images">
        <div id="top"></div>
        <img id="wiper-left" class="wiper" src="img/wiper.png">
        <img id="wiper-right" class="wiper" src="img/wiper.png">
        <img id="handle" class="StopMoving" src="./img/handle.png">
        <img id="dashboard" src="./img/dashboard.png">
        <img id="string" class="StopMoving" src="./img/string.png">
        <img id="ios-string" src="./img/mini-string.png">
        <img id="vehicle-string" src="./img/mini-string.png">
        <img id="gear" src="./img/gear-0.png">
        <div id="under"></div>
    </div>
</div>

<script type="text/javascript">

    window.onload = function(){
        main_window_change_position();

        var controller_video = new Vehicle.RaceMainController("video",$("#local-video"),$("#remote-video"));
    };

    var window_resize_timer = false;
    $(window).resize(function() {
        if (window_resize_timer !== false) {
            clearTimeout(window_resize_timer);
        }
        window_resize_timer = setTimeout(function() {
            main_window_change_position();
        }, 100);
    });

    function main_window_change_position(){
        var win_width=$(window).width();
        var win_height=$(window).height();

        var remote_video_height = win_width*4/3;
        var remote_video_top = win_height - remote_video_height - win_height*0.18;
        $("#remote-video").css({
            "top": remote_video_top
        });
    }


</script>

</body>
</html>